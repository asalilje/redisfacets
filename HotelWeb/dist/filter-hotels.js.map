{"version":3,"sources":["Features/StartPage/filter-hotels.js"],"names":[],"mappings":"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","file":"Features/StartPage/filter-hotels.js","sourcesContent":["import {makeRequest} from './Ajax.js';\n\nclass FilterHotels {\n    \n    constructor() {\n        this.filterSection = document.querySelector(\".filter-section\");\n        this.hotelList = document.querySelector(\".hotel-list\");\n        this.hotelListResult = document.querySelector(\".hotel-list__result\");\n        this.sortBy = \"\";\n        this.sortOrder = \"\";\n        this.setupSortButtons();\n        this.setupFilterButtons();\n        this.setupPriceRange();\n    }\n\n    setupFilterButtons() {\n        const filterButtons = Array.prototype.slice.call(this.filterSection.querySelectorAll(\".filter-button\"));\n        filterButtons.forEach(btn => btn.addEventListener(\"click\", (e) => this.toggleFilter(e)));\n    }\n\n    setupPriceRange() {\n        this.priceMin = this.filterSection.querySelector(\"input[name='priceMin']\");\n        this.priceMax = this.filterSection.querySelector(\"input[name='priceMax']\");\n        this.priceMin.addEventListener(\"keyup\", () => this.loadHotels());\n        this.priceMax.addEventListener(\"keyup\", () => this.loadHotels());\n    }\n\n    setupSortButtons() {\n        this.sortButtons = Array.prototype.slice.call(this.hotelList.querySelectorAll(\".sort-button\"));\n        this.sortButtons.forEach(btn => btn.addEventListener(\"click\", (e) => this.sortList(e)));\n    }\n\n    toggleFilter(e) {\n        if (e.target.getAttribute(\"data-filter-active\") === \"on\") {\n            e.target.setAttribute(\"data-filter-active\", \"off\");\n            e.target.classList.remove(\"filter-button--active\");\n        } else {\n            e.target.setAttribute(\"data-filter-active\", \"on\");\n            e.target.classList.add(\"filter-button--active\");\n        }\n        this.loadHotels();\n    }\n\n    sortList(e) {\n        this.sortBy = e.target.getAttribute(\"data-sort-by\");\n        const sortOrder = e.target.getAttribute(\"data-sort-order\");\n        this.sortButtons.forEach(x => x.setAttribute(\"data-sort-order\", \"\"));\n\n        if (sortOrder === \"asc\") {\n            this.sortOrder = \"desc\";\n            e.target.setAttribute(\"data-sort-order\", \"desc\");\n        } else {\n            e.target.setAttribute(\"data-sort-order\", \"asc\");\n            this.sortOrder = \"asc\";\n        }\n        this.loadHotels();\n    }\n\n    getActiveFilters() {\n        const activeFilters = Array.prototype.slice.call(this.filterSection.querySelectorAll(\"[data-filter-active='on']\"));\n        const filterKeys = activeFilters.map((x) => { return x.getAttribute(\"data-filter-id\") });\n        return filterKeys;\n    }\n\n    getPriceRange() {\n        let priceRange = \"\";\n        if (this.priceMin.value !== \"\")\n            priceRange += `&priceMin=${this.priceMin.value}`;\n        if (this.priceMax.value !== \"\")\n            priceRange += `&priceMax=${this.priceMax.value}`;\n        return priceRange;\n    }\n\n\n    getUrl() {\n        const url = `/part/startpage/hotels?sortBy=${this.sortBy}&sortOrder=${this.sortOrder}&filters=${this.getActiveFilters()}&${this.getPriceRange()}`;\n        return url;\n    }\n\n    loadHotels() {\n        const url = this.getUrl();\n\n        makeRequest('GET', url)\n            .then((data) => {\n                this.displayResult(data);\n            })\n            .catch((err) => {\n                console.error('Ouch, there was an error! ', url, err);\n            });\n    }\n\n    displayResult(data) {\n        if (data == null)\n            return;\n\n        this.hotelListResult.innerHTML = data;\n    }\n}\n\nexport default FilterHotels;\n"],"sourceRoot":"/source/"}